
[Unit]
Description=RabbitMQ Node with ETCD Peer Discovery
After=docker.socket etcd-member.service
Requires=docker.socket etcd-member.service

[Service]
ExecStart=/usr/bin/docker run \
    --detach        \
    --name rabbitmq \
    --network host  \
    --env RABBITMQ_ERLANG_COOKIE="${rabbit_cookie}" \
    --env RABBITMQ_DEFAULT_USER="apollo"   \
    --env RABBITMQ_DEFAULT_PASS="p455w0rd" \
    devops4me/rabbitmq-3.7

[Install]
WantedBy=multi-user.target
